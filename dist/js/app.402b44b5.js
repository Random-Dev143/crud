(function(){"use strict";var a={3648:function(a,e,t){var o=t(9242),n=t(3396);const l={id:"app",class:"container"},i=(0,n._)("div",{class:"w-auto"},[(0,n._)("h1",null,"Registros")],-1),r={class:"row"};function s(a,e,t,o,s,d){const c=(0,n.up)("agregar-manual"),u=(0,n.up)("tabla-personas");return(0,n.wg)(),(0,n.iD)("div",l,[i,(0,n._)("div",r,[(0,n.Wm)(c),(0,n.Wm)(u)])])}var d=t(7139);const c={id:"tabla-personas"},u={class:"table"},p=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Nombre y Apellido"),(0,n._)("th",null,"DNI"),(0,n._)("th",null,"Telefono"),(0,n._)("th",null,"E-mail"),(0,n._)("th",null,"Tipo"),(0,n._)("th",null,"Cant"),(0,n._)("th",null,"Entrada"),(0,n._)("th",null,"Salida")])],-1),m={key:0},g=["onUpdate:modelValue"],h={key:1},f={key:2},_=["onUpdate:modelValue"],v={key:3},b={key:4},w=["onUpdate:modelValue"],y={key:5},k={key:6},P=["onUpdate:modelValue"],D={key:7},E={key:8},U=["onUpdate:modelValue"],C=(0,n._)("option",{value:"bungalow"},"Bungalow",-1),V=(0,n._)("option",{value:"cabana"},"Cabaña",-1),x=[C,V],A={key:9},O={key:10},I=["onUpdate:modelValue"],T={key:11},j={key:12},z=["onUpdate:modelValue"],N={key:13},F={key:14},$=["onUpdate:modelValue"],M={key:15},S={key:16},q=["onClick"],Z=["onClick"],B={key:17},H=["onClick"],K=["onClick"],R={"aria-label":"Page navigation example"},W={class:"pagination justify-content-center"},Y=(0,n._)("a",{class:"page-link",href:"#"},"Previous",-1),G=[Y],J=["onClick"],L={class:"page-link",href:"#"},Q=(0,n._)("a",{class:"page-link",href:"#"},"Next",-1),X=[Q];function aa(a,e,t,l,i,r){return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("table",u,[p,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.datosPaginados,(a=>((0,n.wg)(),(0,n.iD)("tr",{key:a.id},[i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",m,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e=>a.nombre=e},null,8,g),[[o.nr,a.nombre]])])):((0,n.wg)(),(0,n.iD)("td",h,(0,d.zw)(a.nombre),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",f,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e=>a.dni=e},null,8,_),[[o.nr,a.dni]])])):((0,n.wg)(),(0,n.iD)("td",v,(0,d.zw)(a.dni),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",b,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e=>a.tel=e},null,8,w),[[o.nr,a.tel]])])):((0,n.wg)(),(0,n.iD)("td",y,(0,d.zw)(a.tel),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",k,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e=>a.email=e},null,8,P),[[o.nr,a.email]])])):((0,n.wg)(),(0,n.iD)("td",D,(0,d.zw)(a.email),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",E,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e=>a.tipo=e,class:"form-select form-select-sm","aria-label":".form-select-sm example"},x,8,U),[[o.bM,a.tipo]])])):((0,n.wg)(),(0,n.iD)("td",A,(0,d.zw)(a.tipo),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",O,[(0,n.wy)((0,n._)("input",{type:"number",min:"1",max:"6",class:"form-control","onUpdate:modelValue":e=>a.cantidad=e},null,8,I),[[o.nr,a.cantidad]])])):((0,n.wg)(),(0,n.iD)("td",T,(0,d.zw)(a.cantidad),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",j,[(0,n.wy)((0,n._)("input",{type:"date",class:"form-control","onUpdate:modelValue":e=>a.entrada=e},null,8,z),[[o.nr,a.entrada]])])):((0,n.wg)(),(0,n.iD)("td",N,(0,d.zw)(a.entrada),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",F,[(0,n.wy)((0,n._)("input",{type:"date",class:"form-control","onUpdate:modelValue":e=>a.salida=e},null,8,$),[[o.nr,a.salida]])])):((0,n.wg)(),(0,n.iD)("td",M,(0,d.zw)(a.salida),1)),i.editando===a.id?((0,n.wg)(),(0,n.iD)("td",S,[(0,n._)("button",{class:"btn btn-success ml-2",onClick:e=>r.guardarPersona(a)},"Guardar ",8,q),(0,n._)("button",{class:"btn btn-secondary ml-2",onClick:e=>r.cancelarEdicion(a)},"Cancelar ",8,Z)])):((0,n.wg)(),(0,n.iD)("td",B,[(0,n._)("button",{class:"btn btn-danger",onClick:e=>r.eliminarPersona(a.id)}," Eliminar ",8,H),(0,n._)("button",{class:"btn btn-info ml-2",onClick:e=>r.editarPersona(a)}," Editar ",8,K)]))])))),128))])]),(0,n._)("nav",R,[(0,n._)("ul",W,[(0,n._)("li",{class:"page-item",onClick:e[0]||(e[0]=a=>r.getPreviousPage())},G),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.totalPaginas(),(a=>((0,n.wg)(),(0,n.iD)("li",{key:a,onClick:e=>r.getDataPagina(a),class:(0,d.C_)(["page-item",r.isActive(a)])},[(0,n._)("a",L,(0,d.zw)(a),1)],10,J)))),128)),(0,n._)("li",{class:"page-item",onClick:e[1]||(e[1]=a=>r.getNextPage())},X)])])])}var ea={name:"tabla-personas",props:{},data(){return{url:"http://127.0.0.1:5000/registros",personas:[],cargando:!0,error:!1,elementosPorPagina:10,datosPaginados:[],paginaActual:1,idPersonaEditada:null,editando:null}},mounted(){this.fetchData(this.url)},methods:{async fetchData(a){try{const e=await fetch(a),t=await e.json();this.personas=t,this.cargando=!1,this.getDataPagina(1)}catch(e){console.log(e),this.error=!0}},totalPaginas(){return Math.ceil(this.personas.length/this.elementosPorPagina)},getDataPagina(a){this.paginaActual=a,this.datosPaginados=[];let e=a*this.elementosPorPagina-this.elementosPorPagina,t=a*this.elementosPorPagina;this.datosPaginados=this.personas.slice(e,t)},getPreviousPage(){this.paginaActual>1&&this.paginaActual--,this.getDataPagina(this.paginaActual)},getNextPage(){this.paginaActual<this.totalPaginas()&&this.paginaActual++,this.getDataPagina(this.paginaActual)},isActive(a){return a==this.paginaActual?"active":""},async eliminarPersona(a){try{const e=await fetch(`http://localhost:5000/registros/${a}}`,{method:"DELETE"});e.ok?(console.log("Persona con ID ${id} se ha eliminado"),this.fetchData(this.url)):console.error("Error al intentar eliminar ${id}")}catch(e){console.error(e)}},editarPersona(a){this.personaEditada=Object.assign({},a),this.idPersonaEditada=a.id,this.editando=a.id,console.log(`Editando persona con ID ${this.idPersonaEditada}`)},cancelarEdicion(a){Object.assign(a,this.personaEditada),this.editando=null},eliminarCampoId(a){const e={...a};for(const t in e)if("id"===t){delete e[t];break}return e},async guardarPersona(a){const e=this.eliminarCampoId(a);try{const t=await fetch(`${this.url}/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Error en la solicitud PUT: ${response.statusText}");const o=await t.json();console.log("Solicitud PUT exitosa",o),this.reiniciarVariables(),this.fetchData(this.url)}catch(t){console.error(t)}},reiniciarVariables(){this.editando=null,this.idPersonaEditada=null}}},ta=t(89);const oa=(0,ta.Z)(ea,[["render",aa]]);var na=oa;const la=a=>((0,n.dD)("data-v-139cfff4"),a=a(),(0,n.Cn)(),a),ia={id:"agregar-manual"},ra={class:"container"},sa={class:"row"},da={class:"col-sm-12 col-md-6 col-lg-3"},ca=la((()=>(0,n._)("div",{class:"form-grup"},[(0,n._)("label",{for:""},"Nombre y Apellido")],-1))),ua={class:"col-sm-12 col-md-6 col-lg-3"},pa=la((()=>(0,n._)("div",{class:"form-grup"},[(0,n._)("label",{for:""},"DNI")],-1))),ma={class:"col-sm-12 col-md-6 col-lg-3"},ga=la((()=>(0,n._)("div",{class:"form-grup"},[(0,n._)("label",{for:""},"Telefono")],-1))),ha={class:"col-sm-12 col-md-6 col-lg-3"},fa=la((()=>(0,n._)("div",{class:"form-grup"},[(0,n._)("label",{for:""},"E-mail")],-1))),_a={class:"col-sm-12 col-md-6 col-lg-3"},va=la((()=>(0,n._)("div",{class:"form-group mb-0"},[(0,n._)("label",null,"Tipo")],-1))),ba=la((()=>(0,n._)("option",{value:"bungalow"},"Bungalow",-1))),wa=la((()=>(0,n._)("option",{value:"cabana"},"Cabaña",-1))),ya=[ba,wa],ka={class:"col-sm-12 col-md-6 col-lg-3"},Pa=la((()=>(0,n._)("div",{class:"form-group mb-0"},[(0,n._)("label",{for:"cantidad"},"Cantidad")],-1))),Da={class:"col-sm-12 col-md-6 col-lg-3"},Ea=la((()=>(0,n._)("div",{class:"form-grup"},[(0,n._)("label",{for:""},"Entrada")],-1))),Ua={class:"col-sm-12 col-md-6 col-lg-3"},Ca=la((()=>(0,n._)("div",{class:"form-grup"},[(0,n._)("label",{for:""},"Salida")],-1))),Va=la((()=>(0,n._)("div",{class:"row col-sm-12 col-md-6 col-lg-3"},[(0,n._)("div",{class:"form-group"},[(0,n._)("button",{class:"btn btn-primary"},"Añadir")])],-1))),xa={class:"container"},Aa={class:"row"},Oa={class:"col-sm12 col-md-6 col-lf-3"},Ia={key:0,class:"alert alert-danger",role:"alert"},Ta={class:"col-sm12 col-md-6 col-lf-3"},ja={key:0,class:"alert alert-success",role:"alert"};function za(a,e,t,l,i,r){return(0,n.wg)(),(0,n.iD)("div",ia,[(0,n._)("form",{onSubmit:e[10]||(e[10]=(0,o.iM)(((...a)=>r.enviarFormulario&&r.enviarFormulario(...a)),["prevent"]))},[(0,n._)("div",ra,[(0,n._)("div",sa,[(0,n._)("div",da,[ca,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i.persona.nombre=a),type:"text",class:(0,d.C_)(["form-control",{"is invalid":i.procesando&&r.nombreInvalido}]),onFocus:e[1]||(e[1]=(...a)=>r.resetEstado&&r.resetEstado(...a))},null,34),[[o.nr,i.persona.nombre]])]),(0,n._)("div",ua,[pa,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>i.persona.dni=a),type:"text",class:"form-control"},null,512),[[o.nr,i.persona.dni]])]),(0,n._)("div",ma,[ga,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>i.persona.tel=a),type:"text",class:(0,d.C_)(["form-control",{"is invalid":i.procesando&&r.telInvalido}]),onFocus:e[4]||(e[4]=(...a)=>r.resetEstado&&r.resetEstado(...a))},null,34),[[o.nr,i.persona.tel]])]),(0,n._)("div",ha,[fa,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>i.persona.email=a),type:"email",class:"form-control"},null,512),[[o.nr,i.persona.email]])]),(0,n._)("div",_a,[va,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.persona.tipo=a),class:"form-select form-select-sm","aria-label":".form-select-sm example"},ya,512),[[o.bM,i.persona.tipo]])]),(0,n._)("div",ka,[Pa,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>i.persona.cantidad=a),type:"number",id:"cantidad",name:"cantidad",max:"6",min:"1",class:"form-control"},null,512),[[o.nr,i.persona.cantidad]])]),(0,n._)("div",Da,[Ea,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>i.persona.entrada=a),type:"date",required:"",class:"form-control"},null,512),[[o.nr,i.persona.entrada]])]),(0,n._)("div",Ua,[Ca,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>i.persona.salida=a),type:"date",required:"",class:"form-control"},null,512),[[o.nr,i.persona.salida]])])]),Va]),(0,n._)("div",xa,[(0,n._)("div",Aa,[(0,n._)("div",Oa,[i.error&&i.procesando?((0,n.wg)(),(0,n.iD)("div",Ia,"Debes rellenar todos los campos")):(0,n.kq)("",!0)]),(0,n._)("div",Ta,[i.correcto?((0,n.wg)(),(0,n.iD)("div",ja,"Información enviada correctamente")):(0,n.kq)("",!0)])])])],32)])}var Na={name:"agregar-manual",data(){return{procesando:!1,correcto:!1,error:!1,persona:{nombre:"",dni:"",tel:"",email:"",tipo:"",cantidad:"",entrada:"",salida:""}}},methods:{async enviarFormulario(){if(this.procesando=!0,this.resetEstado(),this.nombreInvalido||this.telInvalido)this.error=!0;else try{const a=new FormData;a.append("nombre",this.persona.nombre),a.append("dni",this.persona.dni),a.append("tel",this.persona.tel),a.append("email",this.persona.email),a.append("tipo",this.persona.tipo),a.append("cantidad",this.persona.cantidad),a.append("entrada",this.persona.entrada),a.append("salida",this.persona.salida);const e=await fetch("http://127.0.0.1:5000/registros",{method:"POST",body:a});e.ok?(console.log("Registro enviado con éxito"),this.error=!1,this.correcto=!0,this.procesando=!1,this.persona={nombre:"",dni:"",tel:"",email:"",tipo:"",cantidad:"",entrada:"",salida:""}):console.error("Error al enviar el registro")}catch(a){console.error(a)}},resetEstado(){this.correcto=!1,this.error=!1}},computed:{nombreInvalido(){return this.persona.nombre.length<1},telInvalido(){return this.persona.tel.length<1}}};const Fa=(0,ta.Z)(Na,[["render",za],["__scopeId","data-v-139cfff4"]]);var $a=Fa,Ma={name:"App",components:{TablaPersonas:na,AgregarManual:$a}};const Sa=(0,ta.Z)(Ma,[["render",s]]);var qa=Sa;(0,o.ri)(qa).mount("#app")}},e={};function t(o){var n=e[o];if(void 0!==n)return n.exports;var l=e[o]={exports:{}};return a[o].call(l.exports,l,l.exports,t),l.exports}t.m=a,function(){var a=[];t.O=function(e,o,n,l){if(!o){var i=1/0;for(c=0;c<a.length;c++){o=a[c][0],n=a[c][1],l=a[c][2];for(var r=!0,s=0;s<o.length;s++)(!1&l||i>=l)&&Object.keys(t.O).every((function(a){return t.O[a](o[s])}))?o.splice(s--,1):(r=!1,l<i&&(i=l));if(r){a.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}l=l||0;for(var c=a.length;c>0&&a[c-1][2]>l;c--)a[c]=a[c-1];a[c]=[o,n,l]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var o in e)t.o(e,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:e[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){var a={143:0};t.O.j=function(e){return 0===a[e]};var e=function(e,o){var n,l,i=o[0],r=o[1],s=o[2],d=0;if(i.some((function(e){return 0!==a[e]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(s)var c=s(t)}for(e&&e(o);d<i.length;d++)l=i[d],t.o(a,l)&&a[l]&&a[l][0](),a[l]=0;return t.O(c)},o=self["webpackChunkcrud"]=self["webpackChunkcrud"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(3648)}));o=t.O(o)})();
//# sourceMappingURL=app.402b44b5.js.map